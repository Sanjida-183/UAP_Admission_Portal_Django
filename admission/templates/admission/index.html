<!-- admission/templates/admission/index.html -->
{% extends "admission/base.html" %}
{% load static %}

{% block title %}Home â€” UAP Admission{% endblock %}

{% block extra_css %}
<style>
/* Additional styles for the home page */
.hero-buttons {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    flex-wrap: wrap;
    justify-content: center;
}

.hero-buttons .nav-btn {
    margin: 5px;
}

/* Ensure the original design remains unchanged */
.section {
    transform: translateY(6px);
    opacity: 0;
    transition: all .6s ease;
}
.section.visible {
    transform: none;
    opacity: 1;
}

/* Original styles from your CSS */
.top-header {
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    height: 64px;
    background: var(--uap-maroon);
    color: #fff;
    display: flex;
    align-items: center;
    padding: 8px 18px;
    z-index: 30;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.side-nav {
    position: fixed;
    right: 0;
    top: 80px;
    width: 200px;
    background: #eee;
    height: calc(100% - 80px);
    padding: 20px;
    border-left: 1px solid rgba(0,0,0,0.04);
    overflow: auto;
}

.side-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.side-nav li {
    margin: 6px 0;
}

.side-nav a {
    display: block;
    padding: 10px;
    border-radius: 6px;
    text-decoration: none;
    color: #222;
    transition: all .2s;
}

.side-nav a:hover, .side-nav a.active {
    background: var(--uap-maroon);
    color: #fff;
    transform: translateX(-4px);
    box-shadow: 0 6px 18px rgba(128,0,0,0.08);
}

main {
    max-width: var(--max-width);
    margin: 92px auto;
    padding: 20px 20px 80px 20px;
}

.section {
    background: var(--card);
    padding: 18px;
    border-radius: var(--radius);
    box-shadow: 0 6px 16px rgba(0,0,0,0.04);
    margin-bottom: 18px;
    transition: all .45s;
    opacity: 1;
}

.hero {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 28px;
}

/* Responsive design */
@media (max-width:900px){
    .side-nav{position:fixed;right:0;top:72px;width:150px}
    main{margin:92px 20px 80px 20px}
}
@media (max-width:720px){
    .top-header{padding:10px}
    .side-nav{position:static;width:100%;height:auto;background:transparent;border-left:0;display:flex;justify-content:center;padding:8px 0}
    .side-nav ul{display:flex;gap:6px}
    .side-nav a{padding:8px 10px}
    main{margin-top:150px;padding:12px}
}
</style>
{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UAP Admission Portal â€” Home</title>
</head>
<body>
  <!-- LOADING BAR (used when navigating to admission page) -->
  <div id="nav-loader" class="nav-loader" aria-hidden="true">
    <div class="nav-loader-bar"></div>
  </div>

  <!-- Right-side vertical nav (on desktop) -->
  <nav class="side-nav" role="navigation" aria-label="Main menu">
    <ul>
      <li><a href="#home" class="active">Home</a></li>
      <li><a href="{% url 'admission:admission_info' %}" class="to-admission">Admission</a></li>
      <li><a href="#academic">Academic</a></li>
      <li><a href="#clubs">Clubs</a></li>
      <li><a href="#backlog-section">Backlogs</a></li>
      <li><a href="#contact">Contact Us</a></li>
      <li><a href="{% url 'admission:admission_online' %}" class="to-online">Apply Online</a></li>
      
      <!-- Authentication Links - Added to side navigation -->
      {% if user.is_authenticated %}
        {% if user.is_staff %}
          <li><a href="/admin/" class="nav-side-btn">Admin Panel</a></li>
        {% else %}
          <li><a href="{% url 'admission:student_dashboard' %}" class="nav-side-btn">Dashboard</a></li>
        {% endif %}
        <li><a href="{% url 'admission:logout' %}" class="nav-side-btn logout">Logout</a></li>
      {% else %}
        <li><a href="{% url 'admission:student_login' %}" class="nav-side-btn">Student Login</a></li>
        <li><a href="{% url 'admission:student_register' %}" class="nav-side-btn">Register</a></li>
        <li><a href="{% url 'admission:login' %}" class="nav-side-btn">Staff Login</a></li>
      {% endif %}
    </ul>
  </nav>

  <!-- Main content -->
  <main>
    <section id="home" class="section hero">
      <h2>Welcome to the UAP Admission Portal</h2>
      <p>Find admission rules, department fees, previous year questions and more.</p>
      
      <!-- Optional: Add some call-to-action buttons in hero section -->
      <div class="hero-buttons">
        <a href="{% url 'admission:admission_online' %}" class="nav-btn primary">Apply Now</a>
        <a href="{% url 'admission:admission_info' %}" class="nav-btn">View Admission Info</a>
      </div>
    </section>

    <section id="academic" class="section">
      <div class="section-header">
        <h2>Undergraduate Dept. Wise Credits & Fees</h2>
        <div class="search-wrap">
          <input id="deptSearch" placeholder="Search department..." />
        </div>
      </div>

      <div class="dept-table">
        <table id="deptTable" aria-describedby="dept caption">
          <caption id="dept-caption">Department credits and per-credit fee (BDT)</caption>
          <thead>
            <tr>
              <th>Department</th>
              <th>Total Credits</th>
              <th>Per-Credit Fee (BDT)</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>CSE</td><td>160</td><td>6000</td></tr>
            <tr><td>EEE</td><td>150</td><td>5800</td></tr>
            <tr><td>Architecture</td><td>200</td><td>5500</td></tr>
            <tr><td>Civil</td><td>170</td><td>5200</td></tr>
            <tr><td>Textile</td><td>162</td><td>4900</td></tr>
            <tr><td>BBA</td><td>140</td><td>4200</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="academic" class="section">
      <div class="section-header">
        <h2>Post Graduate Dept. Wise Credits & Fees</h2>
        <div class="search-wrap">
          <input id="deptSearch" placeholder="Search department..." />
        </div>
      </div>

      <div class="dept-table">
        <table id="deptTable" aria-describedby="dept caption">
          <caption id="dept-caption">Department credits and per-credit fee (BDT)</caption>
          <thead>
            <tr>
              <th>Department</th>
              <th>Total Credits</th>
              <th>Per-Credit Fee (BDT)</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>CSE</td><td>160</td><td>6000</td></tr>
            <tr><td>EEE</td><td>150</td><td>5800</td></tr>
            <tr><td>Architecture</td><td>200</td><td>5500</td></tr>
            <tr><td>Civil</td><td>170</td><td>5200</td></tr>
            <tr><td>Textile</td><td>162</td><td>4900</td></tr>
            <tr><td>BBA</td><td>140</td><td>4200</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="pyqs" class="section">
      <h2>Previous Year Questions</h2>
      <p>Download compiled previous-year questions (department-wise PDFs).</p>
      <div class="pyqs-row">
        <a class="btn download" href="assets/pdf/pyqs.pdf" download>ðŸ“¥ Download PYQs (sample)</a>
        <button class="btn" id="open-pyqs-list">View List</button>
      </div>
    </section>

    <section id="clubs" class="section">
      <h2>Clubs & Activities</h2>
      <p>Join tech, debate, cultural and sports clubs to enrich campus life.</p>
      <ul class="clubs-list">
        <li>Programming Club</li>
        <li>Debating Society</li>
        <li>Cultural Club</li>
        <li>Robotics Club</li>
      </ul>
    </section>

    <section id="backlog-section" class="section">
      <h2>Backlog Process</h2>
      <p>Quick overview â€” click below for full instructions and form.</p>
      <button class="btn" id="openBacklog">Open Backlog Info</button>
    </section>

    <section id="contact" class="section">
      <h2>Contact Us</h2>
      <p>Email: <a href="mailto:info@uap-bd.edu">info@uap-bd.edu</a></p>
      <p>Phone: +8802-58157091</p>
    </section>
  </main>

  <!-- BACKLOG MODAL -->
  <div id="backlogModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="backlogTitle">
    <div class="modal-inner">
      <button class="modal-close" id="closeBacklog" aria-label="Close">&times;</button>
      <h3 id="backlogTitle">Backlog Process â€” Steps</h3>
      <ol>
        <li>Contact your department office and get the backlog form.</li>
        <li>Submit form before the deadline with required documents.</li>
        <li>Clear backlog fees at the finance office.</li>
        <li>Register for re-appearance exam and follow the exam schedule.</li>
      </ol>
      <p><strong>Note:</strong> For official forms visit department office.</p>
    </div>
  </div>

  <div id="pyqsList" class="modal" aria-hidden="true">
    <div class="modal-inner">
      <button class="modal-close" id="closePyqsList" aria-label="Close">&times;</button>
      <h3>Previous Year Questions â€” list</h3>
      <ul>
        <li><a href="assets/pdf/pyqs.pdf" download>All Departments (sample PDF)</a></li>
        <li><em>Place department-wise PDFs in assets/pdf/</em></li>
      </ul>
    </div>
  </div>

  <script>
  // Original script.js functionality
  document.addEventListener('DOMContentLoaded', () => {
    const secs = document.querySelectorAll('.section');
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if(e.isIntersecting) e.target.classList.add('visible');
      });
    }, {threshold: 0.12});

    secs.forEach(s => obs.observe(s));

    // department search
    const search = document.getElementById('deptSearch');
    const table = document.getElementById('deptTable');
    search.addEventListener('input', () => {
      const q = search.value.trim().toLowerCase();
      [...table.tBodies[0].rows].forEach(row => {
        const name = row.cells[0].textContent.toLowerCase();
        row.style.display = name.includes(q) ? '' : 'none';
      });
    });

    // Backlog modal
    const backlogModal = document.getElementById('backlogModal');
    const openBacklog = document.getElementById('openBacklog');
    const closeBacklog = document.getElementById('closeBacklog');
    openBacklog.addEventListener('click', () => {
      backlogModal.setAttribute('aria-hidden','false');
    });
    closeBacklog.addEventListener('click', () => backlogModal.setAttribute('aria-hidden','true'));
    backlogModal.addEventListener('click', e => {
      if(e.target === backlogModal) backlogModal.setAttribute('aria-hidden','true');
    });

    // PYQs list modal
    const pyqsList = document.getElementById('pyqsList');
    document.getElementById('open-pyqs-list').addEventListener('click', ()=> pyqsList.setAttribute('aria-hidden','false'));
    document.getElementById('closePyqsList').addEventListener('click', ()=> pyqsList.setAttribute('aria-hidden','true'));
    pyqsList.addEventListener('click', e => { if(e.target === pyqsList) pyqsList.setAttribute('aria-hidden','true'); });

    // intercept admission link to show loader then navigate
    const toAdmissionLinks = document.querySelectorAll('.to-admission');
    const navLoader = document.getElementById('nav-loader');

    toAdmissionLinks.forEach(a => {
      a.addEventListener('click', (ev) => {
        ev.preventDefault();
        const href = a.getAttribute('href');
        // show loader
        navLoader.setAttribute('aria-hidden','false');
        const bar = navLoader.querySelector('.nav-loader-bar');
        bar.style.width = '24%';
        // animate progress
        setTimeout(()=> bar.style.width = '60%', 160);
        setTimeout(()=> bar.style.width = '92%', 380);
        // finalize, then go to page
        setTimeout(()=>{
          bar.style.width = '100%';
        }, 520);
        setTimeout(()=> {
          navLoader.setAttribute('aria-hidden','true');
          bar.style.width = '0%';
          window.location.href = href;
        }, 900);
      });
    });
  });
  </script>
</body>
</html>
{% endblock %}